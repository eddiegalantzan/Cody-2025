# DigitalOcean Setup Guide

Step-by-step instructions for setting up your DigitalOcean account and getting your API token.

## Step 1: Create DigitalOcean Account

1. Go to https://www.digitalocean.com
2. Click **"Sign Up"** in the top right
3. Enter your email address and create a password
4. Verify your email address (check your inbox)
5. Complete the account setup

## Step 2: Add Payment Method

1. Log in to your DigitalOcean account
2. Go to **Settings** → **Billing**
3. Click **"Add Payment Method"**
4. Add a credit card or PayPal account
5. **Note:** You'll only be charged for what you use (~$6/month for the smallest droplet)

## Step 3: Create API Token

1. Log in to DigitalOcean
2. Go to **API** → **Tokens/Keys** (or visit: https://cloud.digitalocean.com/account/api/tokens)
3. Click **"Generate New Token"**
4. Fill in the details:
   - **Token name:** `cody2025-terraform` (or any name you prefer)
   - **Expiration:** Choose "No expiration" (or set a date)
   - **Scopes:** Select **"Write"** (this allows Terraform to create/manage resources)
5. Click **"Generate Token"**
6. **IMPORTANT:** Copy the token immediately - it will only be shown once!
   - The token will look like: `dop_v1_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx`
   - Save it somewhere safe (password manager, notes, etc.)

## Step 4: Add Token to Terraform Configuration

1. Open `terraform.tfvars` in the `infra/terraform` directory
2. Find the line: `do_token = "dop_v1_your_token_here"`
3. Replace `dop_v1_your_token_here` with your actual token:
   ```hcl
   do_token = "dop_v1_your_actual_token_here"
   ```
4. Save the file

## Step 5: Verify Token Works

1. Run Terraform plan to test:
   ```bash
   cd infra/terraform
   terraform plan
   ```
2. If you see no authentication errors, your token is working!

## Troubleshooting

### "Bad credentials" error
- Check that you copied the entire token (it's very long)
- Make sure there are no extra spaces
- Verify the token has "Write" scope

### "Insufficient permissions" error
- Make sure you selected "Write" scope when creating the token
- Create a new token with Write permissions

### Token not working
- Tokens are only shown once when created
- If you lost it, delete the old token and create a new one
- Make sure you're using the correct token (not a read-only token)

## Security Notes

- **Never commit `terraform.tfvars`** to git (it's already in `.gitignore`)
- Keep your API token secure
- If you accidentally commit it, rotate the token immediately
- Consider using environment variables instead (see below)

## Alternative: Using Environment Variable

Instead of putting the token in `terraform.tfvars`, you can use an environment variable:

1. Export the token:
   ```bash
   export TF_VAR_do_token="dop_v1_your_token_here"
   ```

2. Remove `do_token` from `terraform.tfvars` (or leave it empty)

3. Terraform will automatically use the environment variable

## Next Steps

After setting up your DigitalOcean account and API token:

1. ✅ Verify token works: `terraform plan`
2. ✅ Review what will be created
3. ✅ Provision infrastructure: `terraform apply`
4. ✅ Get server details: `terraform output`

## Resources

- DigitalOcean Dashboard: https://cloud.digitalocean.com
- API Tokens: https://cloud.digitalocean.com/account/api/tokens
- Pricing: https://www.digitalocean.com/pricing
- Documentation: https://docs.digitalocean.com

---

## Related Documentation

- [6.0_STEP_1_TERRAFORM_POSTGRES.md](./6.0_STEP_1_TERRAFORM_POSTGRES.md) - Terraform infrastructure setup
- [5.0_PLAN.md](./5.0_PLAN.md) - Overall project plan
- [7.0_SECRETS_MANAGEMENT.md](./7.0_SECRETS_MANAGEMENT.md) - Secrets configuration

