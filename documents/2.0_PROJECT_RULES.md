# Project Rules

Overview of all project rules. See detailed guides for examples and best practices.

> **Note:** Section numbers match original rule numbering. Some numbers skipped for consistency.

## 1. Setup
- macOS, Yarn, TypeScript, PostgreSQL (direct queries)
- No UI libraries. Renderer via Vite

## 2. Architecture
- See [1.0_PRINCIPLES.md](./1.0_PRINCIPLES.md) for DRY, single source of truth, architecture
- `src/shared` holds types, utils, constants (mandatory for reuse)
- tRPC for clientâ†”server; no ORM

## 4. Wrappers
- Use: AppError, FSWrapper, Logger
- Typed wrapper components, minimal props, forwarded refs, explicit interface
- Internal type assertions allowed
- `@ts-expect-error` **may only** appear inside wrapper files
- **ðŸ“– Detailed Guide:** [4.0_WRAPPERS_GUIDE.md](./4.0_WRAPPERS_GUIDE.md)

## 5. TypeScript
- See [1.0_PRINCIPLES.md](./1.0_PRINCIPLES.md) for TypeScript rules
- `useCallback`/`useMemo` for stable callbacks

## 6. Imports & Reuse
- See [1.0_PRINCIPLES.md](./1.0_PRINCIPLES.md) for DRY rules and patterns
- Direct imports (no barrels)
- Share code/CSS via `src/shared` (mandatory)

## 7. Components
- Default: named arrow components (`const MyComponent: React.FC<Props> = (props) => { ... }`)
- Use function declarations for components requiring generics (`function MyComponent<T>(props: Props<T>) { ... }`)

## 8. Styling
- See [1.0_PRINCIPLES.md](./1.0_PRINCIPLES.md) for styling rules
- Low specificity; semantic class names

## 9. Logging & Naming
- See [1.0_PRINCIPLES.md](./1.0_PRINCIPLES.md) for naming and self-documentation rules
- Use project's logger (e.g., `electron-log` via wrapper) for production logging
- Only use `console.error` where logger can't be injected (early bootstrap)
- Prefix messages with context: `logger.error('[MyComponent] Error:', error)`
- Comments explain **why**, not **what**

## 10. QA & Versioning
- Commits only when instructed; manual QA
- No manual versioning; remove obsolete code

## 11. Tooling
- **Prettier:** `yarn format` (root config)
- **ESLint:** TypeScript plugin; preâ€‘commit `yarn lint`

## 12. Preload
- In `{root}/src/preload/<window>.preload.ts`
- Expose typed bridge only

## 13. Packaging
- Electron-Builder (macOS DMG sign+notarize; Win x64 installer)
- Config in `electron-builder.json`

## 14. Accessibility
- Keyboard focusable; ARIA roles/labels as needed

## 15. Documentation
- Code is selfâ€‘documenting
- README for **why/when**, not **how**
- Security hardening **not required**
- Env vars **not used** (document before use)
- For complex algorithms, include `README.md` alongside component explaining rationale, approach, and tradeâ€‘offs

---

## Related Documentation

- [1.0_PRINCIPLES.md](./1.0_PRINCIPLES.md) - Single source of truth for all principles
- [3.0_USER_RULES.md](./3.0_USER_RULES.md) - Quick reference for development workflow
- [4.0_WRAPPERS_GUIDE.md](./4.0_WRAPPERS_GUIDE.md) - Wrapper implementation guide
- [5.0_PLAN.md](./5.0_PLAN.md) - Overall project plan
- [7.0_SECRETS_MANAGEMENT.md](./7.0_SECRETS_MANAGEMENT.md) - Secrets and environment configuration
- [8.0_SECURITY.md](./8.0_SECURITY.md) - Security practices and guidelines
- [9.0_INTEGRATIONS.md](./9.0_INTEGRATIONS.md) - Third-party integrations (Clerk, Payoneer, Mailgun, WhatsApp)
- [README.md](../README.md) - Project overview and quick start

