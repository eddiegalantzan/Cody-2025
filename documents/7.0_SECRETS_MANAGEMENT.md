# üîê Secrets Management

Centralized secrets management with a single `.secrets` file.

## Quick Setup

```bash
# 1. Create .secrets file with your real values
# (Template to be created as .secrets.example)

# 2. Complete setup
yarn secrets:setup
```

## Commands

| Command                  | Description                |
| ------------------------ | -------------------------- |
| `yarn secrets:validate`  | Validate .secrets file     |
| `yarn secrets:copy`      | Copy secrets to .env files |
| `yarn secrets:terraform` | Generate terraform.tfvars  |
| `yarn secrets:github`    | Show GitHub Actions setup  |
| `yarn secrets:setup`     | Complete setup             |
| `yarn secrets:cleanup`   | Remove old secret files    |

## File Format

```bash
# DIGITALOCEAN CONFIGURATION
DO_TOKEN=dop_v1_your_token_here

# DATABASE CONFIGURATION
DATABASE_URL=postgres://postgres:postgres@localhost:5432/app  # From src/shared/single-source.ts (when created)
PGSSL=false
PGPOOL_MAX=10

# CLERK AUTHENTICATION
# See: https://clerk.com/docs
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_your_key_here
CLERK_SECRET_KEY=sk_test_your_key_here
CLERK_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# PAYONEER PAYMENT PROCESSING
# See: https://www.payoneer.com/partners/integrated-payments-api/
PAYONEER_API_KEY=your_api_key_here
PAYONEER_API_SECRET=your_api_secret_here
PAYONEER_ACCOUNT_ID=your_account_id_here
PAYONEER_WEBHOOK_SECRET=your_webhook_secret_here  # If available

# MAILGUN EMAIL SERVICE
# See: https://documentation.mailgun.com/
MAILGUN_API_KEY=your_api_key_here
MAILGUN_DOMAIN=your_domain_here
MAILGUN_WEBHOOK_SIGNING_KEY=your_signing_key_here
MAILGUN_FROM_EMAIL=noreply@your_domain.com
MAILGUN_FROM_NAME=Your Company Name

# WHATSAPP BUSINESS API (META)
# See: https://developers.facebook.com/docs/whatsapp
WHATSAPP_BUSINESS_ACCOUNT_ID=your_account_id_here
WHATSAPP_ACCESS_TOKEN=your_long_lived_access_token_here
WHATSAPP_PHONE_NUMBER_ID=your_phone_number_id_here
WHATSAPP_APP_SECRET=your_app_secret_here
WHATSAPP_VERIFY_TOKEN=your_verify_token_here
WHATSAPP_WEBHOOK_SECRET=your_webhook_secret_here  # Optional
```

## Troubleshooting

- **Missing secrets**: `yarn secrets:validate`
- **Files not working**: `yarn secrets:copy`
- **Terraform issues**: `yarn secrets:terraform`

---

## Related Documentation

- [8.0_SECURITY.md](./8.0_SECURITY.md) - Security practices and secret management
- [9.0_INTEGRATIONS.md](./9.0_INTEGRATIONS.md) - Third-party service secrets (Clerk, Payoneer, Mailgun, WhatsApp)
- [6.0_STEP_1_TERRAFORM_POSTGRES.md](./6.0_STEP_1_TERRAFORM_POSTGRES.md) - Infrastructure setup
